<app-command-bar></app-command-bar>
<div class="page-container">
    <h2 class="title">Overview <app-info-button [popover]="popover"></app-info-button></h2>
    <div id="top-diagrams" class="diagram-container"> 
        <app-energy-consumption-diagram class="item top-item"></app-energy-consumption-diagram>
        <app-energy-mix-diagram class="item top-item"></app-energy-mix-diagram>
    </div>
    <h2 class="title">KPIs</h2>
    <div class="diagram-container kpi-container">
        <div class="sub-kpi-container">
            <app-kpi-chart class="item bottom-item" [kpiName]="KPI.SELF_CONSUMPTION"></app-kpi-chart>
            <app-kpi-chart class="item bottom-item" [kpiName]="KPI.AUTARKY"></app-kpi-chart>
        </div>
        <div class="sub-kpi-container">
            <app-kpi-chart class="item bottom-item" [kpiName]="KPI.CO2_SAVINGS" [popover]="co2savingsPopover"></app-kpi-chart>
            <app-kpi-chart class="item bottom-item" [kpiName]="KPI.COST_SAVINGS" [popover]="costSavingsPopover"></app-kpi-chart>
        </div>
    </div>
    <div class="diagram-container kpi-container">
        <div class="sub-kpi-container">
            <app-kpi-chart class="item bottom-item" [kpiName]="Artificial.TOTAL_CONSUMPTION"></app-kpi-chart>
            <app-kpi-chart class="item bottom-item" [kpiName]="Artificial.TOTAL_PRODUCTION"></app-kpi-chart>
        </div>
        <div class="sub-kpi-container">
            <app-kpi-chart class="item bottom-item" [kpiName]="Artificial.TOTAL_EMISSIONS"></app-kpi-chart>
            <app-kpi-chart class="item bottom-item" [kpiName]="KPI.TOTAL_COSTS_PER_KWH"></app-kpi-chart>
        </div>
    </div>
</div>

<mtx-popover #popover="mtxPopover">
    <ng-template mtxPopoverContent>
        <p><b>Chart Consumed Energy by Source:</b> This bar chart illustrates the volume of energy consumption over various timestamps, categorizing it into two main groups: local and external energy sources. The external energy sources are further subdivided to highlight the proportions of renewable and non-renewable energy.</p>

        <p><b>Chart Energy Mix:</b> The primary view of this chart presents the distribution of emissions associated with the energy consumption within the microgrid, segmented by their respective sources. Upon selecting the 'consumption view', it transitions to display the breakdown of the energy consumption, distinctly categorized by the different energy sources.</p>

        <b>KPI's</b>
        <p><b>Self-Consumption and Autarky</b> b</p>
        <p><b>CO2-Savings</b> </p>
        <p><b>Cost Savings</b> b</p>
    </ng-template>
</mtx-popover>

<mtx-popover #co2savingsPopover="mtxPopover">
    <ng-template mtxPopoverContent>
        Example explanation of the co2 savings
    </ng-template>
</mtx-popover>

<mtx-popover #costSavingsPopover="mtxPopover">
    <ng-template mtxPopoverContent>
        Example explanation of the cost savings
    </ng-template>
</mtx-popover>